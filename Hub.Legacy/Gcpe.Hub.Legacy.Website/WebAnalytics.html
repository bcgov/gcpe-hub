<!-- Snowplow starts plowing - Standalone vE.2.14.0 -->
<script type="text/javascript">
jQuery(document).ready(function () {
    ; (function (p, l, o, w, i, n, g) {
        if (!p[i]) {
            p.GlobalSnowplowNamespace = p.GlobalSnowplowNamespace || [];
            p.GlobalSnowplowNamespace.push(i); p[i] = function () {
                (p[i].q = p[i].q || []).push(arguments)
            }; p[i].q = p[i].q || []; n = l.createElement(o); g = l.getElementsByTagName(o)[0]; n.async = 1;
            n.src = w; g.parentNode.insertBefore(n, g)
        }
    }(window, document, "script", "https://www2.gov.bc.ca/StaticWebResources/static/sp/sp-2-14-0.js", "snowplow"));
    var collector = 'spt.apps.gov.bc.ca';
    window.snowplow('newTracker', 'rt', collector, {
        appId: "Snowplow_standalone",
        cookieLifetime: 86400 * 548,
        platform: 'web',
        post: true,
        forceSecureTracker: true,
        contexts: {
            webPage: true,
            performanceTiming: true
        }
    });
    
    window.snowplow('enableActivityTracking', 30, 30); // Ping every 30 seconds after 30 seconds
    window.snowplow('enableLinkClickTracking');
    window.snowplow('trackPageView');
    /*customized tracking*/

    function format_date(dateDiv) {
        if (!dateDiv.length) {
            return null;
        }
        date_list = dateDiv.split('/');
        date = null;
        if (date_list.length = 3) {
            date = date_list[2] + '-' + date_list[0] + '-' + date_list[1];
        }
        return date;
    }

    function format_text(text) {
        if (!text.length) {
            return null;
        }
        else {
            return text;
        }
    }

    function format_select(text, default_text) {
        if (text == default_text) {
            return null;
        }
        else {
            return text;
        }
    }
    
    search_button = document.getElementById('ExecuteSearchButton');
    if (search_button != null) {
        search_button.addEventListener('click', search_button_click, false);
    }
    
    function search_button_click() {
  
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_action/jsonschema/1-0-0',
            data: {
                action: 'Search',
                count: 50,
                filters: {
                    from_date: format_date($('#StartDateTextBox').val()),
                    to_date: format_date($('#EndDateTextBox').val()),
                    this_day_only: $('#ThisDayOnlyCheckBox').is(':checked'),
                    look_ahead_filter: $("input[id^='DisplayRadioButtonList_']:checked").next('label').text(),
                    search_text: format_text($('#txtSearch').val()),
                    category: format_select($("#fcategory option:selected").text(),'Select Category'),
                    issue: format_select($("#fissue option:selected").text(), 'Select Issue'),
                    date_confirmed: format_select($("#fdateConfirmed option:selected").text(), 'Select Date Confirmed'),
                    status: format_select($("#fstatus option:selected").text(), 'Select Status'),
                    ministry: format_select($("#fministry option:selected").text(), 'Select Ministry'),
                    comm_contact: format_select($("#fcontact option:selected").text(), 'Select Comm. Contact'),
                    representative: format_select($("#frepresentative option:selected").text(), 'Select Representative'),
                    intiative: format_select($("#finitiative option:selected").text(), 'Select Initiative'),
                    premier_requested: format_select($("#fpremier option:selected").text(), 'Select Premier Requested'),
                    distribution: format_select($("#fdistribution option:selected").text(), 'Select Distribution'),
                    look_ahead_filter: $("input[id^='lookahead']:checked").next('label').text()
                }
            }
        });
    }

    calendar_view_button = document.getElementById('calendar_view_button');
    if (calendar_view_button != null) {
        calendar_view_button.addEventListener('click', calendar_view_button_click, false);
    }
    function calendar_view_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'calendar_view_button',
            }
        });
    }

    excel_export_button = document.getElementById('excel_export_button');
    if (excel_export_button != null) {
        excel_export_button.addEventListener('click', calendar_view_button_click, false);
    }
    function excel_export_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'excel_export_button',
            }
        });
    }

    look_ahead_report_button = document.getElementById('look_ahead_report_button');
    if (look_ahead_report_button != null) {
        look_ahead_report_button.addEventListener('click', look_ahead_report_button_click, false);
    }
    function look_ahead_report_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'look_ahead_report_button',
            }
        });
    }

    exec_look_ahead_report_button = document.getElementById('exec_look_ahead_report_button');
    if (exec_look_ahead_report_button != null) {
        exec_look_ahead_report_button.addEventListener('click', exec_look_ahead_report_button_click, false);
    }
    function exec_look_ahead_report_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'exec_look_ahead_report_button',
            }
        });
    }

    main_report_button = document.getElementById('main_30_60_90_report_button');
    if (main_report_button != null) {
        main_report_button.addEventListener('click', main_report_button_click, false);
    }
    function main_report_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'main_30_60_90_report_button',
            }
        });
    }

    planning_report_button = document.getElementById('planning_report_button');
    if (planning_report_button != null) {
        planning_report_button.addEventListener('click', planning_report_button_click, false);
    }
    function planning_report_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'planning_report_button',
            }
        });
    }

    manage_button = document.getElementById('manage');
    if (manage_button != null) {
        manage_button.addEventListener('click', manage_button_click, false);
    }
    function manage_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'manage_button',
            }
        });
    }

    sync_button = document.getElementById('sync');
    if (sync_button != null) {
        sync_button.addEventListener('click', sync_button_click, false);
    }
    function sync_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'sync_button',
            }
        });
    }

    help_button = document.getElementById('help');
    if (help_button != null) {
        help_button.addEventListener('click', help_button_click, false);
    }
    function help_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'help_button',
            }
        });
    }

    manage_query_button = document.getElementById('btnDialog');
    if (manage_query_button != null) {
        manage_query_button.addEventListener('click', manage_query_button_click, false);
    }
    function manage_query_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'manage_query_button',
            }
        });
    }

    save_query_button = document.getElementById('SaveQuery');
    if (save_query_button != null) {
        save_query_button.addEventListener('click', save_query_button_click, false);
    }
    function save_query_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'save_query_button',
            }
        });
    }

    reset_filter_dates_button = document.getElementById('ResetFilterDates');
    if (reset_filter_dates_button != null) {
        reset_filter_dates_button.addEventListener('click', reset_filter_dates_button_click, false);
    }
    function reset_filter_dates_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'reset_filter_dates_button',
            }
        });
    }

    reset_filters_button = document.getElementById('ResetFilters');
    if (reset_filters_button != null) {
        reset_filters_button.addEventListener('click', reset_filters_button_click, false);
    }
    function reset_filters_button_click() {
        window.snowplow('trackSelfDescribingEvent', {
            schema: 'iglu:ca.bc.gov.bcs/calendar_click/jsonschema/1-0-0',
            data: {
                action: 'reset_filters_button',
            }
        });
    }
});
//  <!-- Snowplow stop plowing -->
</script>

<!-- Snowplow stop plowing -->
